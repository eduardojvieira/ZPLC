"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2359],{7454(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"advanced/multitask","title":"Multitasking","description":"Running multiple tasks with different intervals and priorities","source":"@site/docs/advanced/multitask.md","sourceDirName":"advanced","slug":"/advanced/multitask","permalink":"/ZPLC/docs/advanced/multitask","draft":false,"unlisted":false,"editUrl":"https://github.com/eduardojvieira/ZPLC/tree/master/docs/docs/advanced/multitask.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Multitasking","description":"Running multiple tasks with different intervals and priorities"},"sidebar":"docsSidebar","previous":{"title":"Hardware Abstraction Layer (HAL)","permalink":"/ZPLC/docs/runtime/hal"},"next":{"title":"Debugging","permalink":"/ZPLC/docs/advanced/debugging"}}');var t=s(4848),r=s(8453);const l={sidebar_position:1,title:"Multitasking",description:"Running multiple tasks with different intervals and priorities"},d="Multitask Scheduler",a={},o=[{value:"Scheduler Architecture",id:"scheduler-architecture",level:2},{value:"Execution Model",id:"execution-model",level:3},{value:"Defining Tasks",id:"defining-tasks",level:2},{value:"In Project Configuration (zplc.json)",id:"in-project-configuration-zplcjson",level:3},{value:"Task Properties",id:"task-properties",level:3},{value:"Example: Multi-Rate Control System",id:"example-multi-rate-control-system",level:2},{value:"fast_control.st (10ms - Motor PID)",id:"fast_controlst-10ms---motor-pid",level:3},{value:"main.st (100ms - Process Logic)",id:"mainst-100ms---process-logic",level:3},{value:"diagnostics.st (1000ms - Logging)",id:"diagnosticsst-1000ms---logging",level:3},{value:"Memory Layout for Multitask",id:"memory-layout-for-multitask",level:2},{value:"Inter-Task Communication",id:"inter-task-communication",level:3},{value:"Configuration (Kconfig)",id:"configuration-kconfig",level:2},{value:"prj.conf Settings",id:"prjconf-settings",level:3},{value:"Runtime Limits",id:"runtime-limits",level:3},{value:"Shell Commands",id:"shell-commands",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Keep Fast Tasks Fast",id:"1-keep-fast-tasks-fast",level:3},{value:"2. Avoid Blocking Operations",id:"2-avoid-blocking-operations",level:3},{value:"3. Minimize Shared Data",id:"3-minimize-shared-data",level:3},{value:"4. Use Appropriate Priorities",id:"4-use-appropriate-priorities",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Task Overruns",id:"task-overruns",level:3},{value:"Inter-Task Race Conditions",id:"inter-task-race-conditions",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"multitask-scheduler",children:"Multitask Scheduler"})}),"\n",(0,t.jsx)(n.p,{children:"ZPLC supports concurrent execution of multiple tasks with independent intervals and priorities. This is essential for industrial applications where you need:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fast loops"})," for motion control (1-10ms)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Normal loops"})," for process logic (50-100ms)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Slow loops"})," for HMI updates and logging (500ms+)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"scheduler-architecture",children:"Scheduler Architecture"}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TB\n    subgraph "ZPLC Scheduler"\n        direction TB\n        SCHED[Scheduler Core]\n        \n        subgraph "Task Queue (Priority Sorted)"\n            T0[Task 0: Fast - 10ms - Priority 0]\n            T1[Task 1: Normal - 100ms - Priority 1]\n            T2[Task 2: Slow - 500ms - Priority 2]\n        end\n        \n        SCHED --\x3e T0\n        SCHED --\x3e T1\n        SCHED --\x3e T2\n    end\n    \n    subgraph "Shared Resources"\n        IPI[Input Image - IPI]\n        OPI[Output Image - OPI]\n        RETAIN[Retentive Memory]\n    end\n    \n    T0 <--\x3e IPI\n    T0 <--\x3e OPI\n    T1 <--\x3e IPI\n    T1 <--\x3e OPI\n    T2 <--\x3e RETAIN'}),"\n",(0,t.jsx)(n.h3,{id:"execution-model",children:"Execution Model"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Priority-Based"}),": Lower priority number = higher priority"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Non-Preemptive"}),": Tasks run to completion within their cycle"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Shared I/O"}),": All tasks share the same IPI/OPI (synchronized)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Isolated Work Memory"}),": Each task has its own stack"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"defining-tasks",children:"Defining Tasks"}),"\n",(0,t.jsx)(n.h3,{id:"in-project-configuration-zplcjson",children:"In Project Configuration (zplc.json)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "MotorControl",\n  "version": "1.0.0",\n  "target": "rpi_pico",\n  "tasks": [\n    {\n      "name": "FastLoop",\n      "file": "fast_control.st",\n      "type": "CYCLIC",\n      "interval_ms": 10,\n      "priority": 0\n    },\n    {\n      "name": "MainLogic", \n      "file": "main.st",\n      "type": "CYCLIC",\n      "interval_ms": 100,\n      "priority": 1\n    },\n    {\n      "name": "Diagnostics",\n      "file": "diagnostics.st",\n      "type": "CYCLIC",\n      "interval_ms": 1000,\n      "priority": 5\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"task-properties",children:"Task Properties"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Unique task identifier"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"file"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Source file (.st, .ld.json, .fbd.json)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"type"})}),(0,t.jsx)(n.td,{children:"enum"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"CYCLIC"})," (periodic) or ",(0,t.jsx)(n.code,{children:"EVENT"})," (triggered)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"interval_ms"})}),(0,t.jsx)(n.td,{children:"number"}),(0,t.jsx)(n.td,{children:"Cycle time in milliseconds"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"priority"})}),(0,t.jsx)(n.td,{children:"number"}),(0,t.jsx)(n.td,{children:"0 = highest, 255 = lowest"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"example-multi-rate-control-system",children:"Example: Multi-Rate Control System"}),"\n",(0,t.jsx)(n.h3,{id:"fast_controlst-10ms---motor-pid",children:"fast_control.st (10ms - Motor PID)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-st",children:"PROGRAM FastLoop\nVAR\n    (* Inputs *)\n    encoder_count : DINT;\n    speed_setpoint : REAL;\n    \n    (* PID Controller *)\n    pid : PID_CONTROLLER;\n    \n    (* Output *)\n    pwm_duty : REAL;\nEND_VAR\n\n(* Read encoder *)\nencoder_count := %ID0;\n\n(* Calculate speed from encoder delta *)\n(* ... speed calculation ... *)\n\n(* Run PID *)\npid(\n    SETPOINT := speed_setpoint,\n    PROCESS_VALUE := actual_speed,\n    KP := 1.5,\n    KI := 0.1,\n    KD := 0.05\n);\n\n(* Write PWM output *)\npwm_duty := LIMIT(0.0, pid.OUTPUT, 100.0);\n%QD0 := REAL_TO_DINT(pwm_duty * 65535.0 / 100.0);\n\nEND_PROGRAM\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mainst-100ms---process-logic",children:"main.st (100ms - Process Logic)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-st",children:"PROGRAM MainLogic\nVAR\n    (* State machine *)\n    state : INT := 0;\n    \n    (* Inputs *)\n    start_button : BOOL;\n    stop_button : BOOL;\n    e_stop : BOOL;\n    \n    (* Shared with FastLoop *)\n    speed_setpoint : REAL;  (* Written here, read by FastLoop *)\n    \n    (* Timers *)\n    ramp_timer : TON;\nEND_VAR\n\n(* Read digital inputs *)\nstart_button := %IX0.0;\nstop_button := %IX0.1;\ne_stop := %IX0.2;\n\n(* Emergency stop always takes priority *)\nIF e_stop THEN\n    state := 0;\n    speed_setpoint := 0.0;\n    RETURN;\nEND_IF;\n\n(* State machine *)\nCASE state OF\n    0: (* IDLE *)\n        speed_setpoint := 0.0;\n        IF start_button AND NOT stop_button THEN\n            state := 1;\n            ramp_timer(IN := FALSE);\n        END_IF;\n        \n    1: (* STARTING - Ramp up *)\n        ramp_timer(IN := TRUE, PT := T#5s);\n        speed_setpoint := 1500.0 * TIME_TO_REAL(ramp_timer.ET) / 5000.0;\n        \n        IF ramp_timer.Q THEN\n            state := 2;\n        END_IF;\n        \n    2: (* RUNNING *)\n        speed_setpoint := 1500.0;\n        IF stop_button THEN\n            state := 3;\n            ramp_timer(IN := FALSE);\n        END_IF;\n        \n    3: (* STOPPING - Ramp down *)\n        ramp_timer(IN := TRUE, PT := T#3s);\n        speed_setpoint := 1500.0 * (1.0 - TIME_TO_REAL(ramp_timer.ET) / 3000.0);\n        \n        IF ramp_timer.Q THEN\n            state := 0;\n        END_IF;\nEND_CASE;\n\n(* Update status outputs *)\n%QX0.0 := state >= 1;  (* Motor enabled *)\n%QX0.1 := state = 2;   (* Running indicator *)\n\nEND_PROGRAM\n"})}),"\n",(0,t.jsx)(n.h3,{id:"diagnosticsst-1000ms---logging",children:"diagnostics.st (1000ms - Logging)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-st",children:"PROGRAM Diagnostics\nVAR\n    (* Statistics *)\n    run_hours : REAL;\n    cycle_count : UDINT;\n    max_cycle_time : TIME;\n    \n    (* Alarms *)\n    overspeed_alarm : BOOL;\n    overtemp_alarm : BOOL;\nEND_VAR\n\n(* Update run hours *)\nIF state = 2 THEN  (* Running *)\n    run_hours := run_hours + 0.001 / 3600.0;  (* 1s in hours *)\n    cycle_count := cycle_count + 1;\nEND_IF;\n\n(* Check alarms *)\noverspeed_alarm := actual_speed > 1650.0;  (* 110% of setpoint *)\novertemp_alarm := motor_temp > 80.0;\n\n(* Log to console (debug) *)\n(* These would be sent via MQTT in production *)\n\nEND_PROGRAM\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"memory-layout-for-multitask",children:"Memory Layout for Multitask"}),"\n",(0,t.jsx)(n.p,{children:"Each task has isolated work memory but shares I/O:"}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Memory Map"\n        IPI["IPI (0x0000-0x0FFF)<br/>Shared Inputs"]\n        OPI["OPI (0x1000-0x1FFF)<br/>Shared Outputs"]\n        \n        subgraph "Task 0 Memory"\n            W0["Work (0x2000-0x27FF)<br/>2KB per task"]\n        end\n        \n        subgraph "Task 1 Memory"\n            W1["Work (0x2800-0x2FFF)<br/>2KB per task"]\n        end\n        \n        subgraph "Task 2 Memory"\n            W2["Work (0x3000-0x37FF)<br/>2KB per task"]\n        end\n        \n        RETAIN["Retentive (0x4000-0x4FFF)<br/>Shared, NVS-backed"]\n    end'}),"\n",(0,t.jsx)(n.h3,{id:"inter-task-communication",children:"Inter-Task Communication"}),"\n",(0,t.jsxs)(n.p,{children:["Tasks communicate through ",(0,t.jsx)(n.strong,{children:"shared memory regions"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"I/O Images"}),": IPI/OPI are updated atomically before/after each scan"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Global Variables"}),": Declare with ",(0,t.jsx)(n.code,{children:"VAR_GLOBAL"})," for cross-task access"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Retentive Memory"}),": Use ",(0,t.jsx)(n.code,{children:"VAR_RETAIN"})," for persistent shared data"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-st",children:"(* In a shared header or global declarations *)\nVAR_GLOBAL\n    speed_setpoint : REAL;  (* Written by MainLogic, read by FastLoop *)\n    actual_speed : REAL;    (* Written by FastLoop, read by all *)\n    motor_temp : REAL;      (* Written by HAL, read by Diagnostics *)\nEND_VAR\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"configuration-kconfig",children:"Configuration (Kconfig)"}),"\n",(0,t.jsx)(n.h3,{id:"prjconf-settings",children:"prj.conf Settings"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"# Enable scheduler\nCONFIG_ZPLC_SCHEDULER=y\n\n# Maximum concurrent tasks\nCONFIG_ZPLC_MAX_TASKS=4\n\n# Scheduler work queue settings\nCONFIG_ZPLC_SCHED_WORKQ_STACK_SIZE=2048\nCONFIG_ZPLC_SCHED_WORKQ_PRIORITY=5\n\n# Per-task work memory size\nCONFIG_ZPLC_WORK_MEMORY_SIZE=8192\n"})}),"\n",(0,t.jsx)(n.h3,{id:"runtime-limits",children:"Runtime Limits"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Range"}),(0,t.jsx)(n.th,{children:"Notes"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Max Tasks"}),(0,t.jsx)(n.td,{children:"4"}),(0,t.jsx)(n.td,{children:"1-16"}),(0,t.jsx)(n.td,{children:"Limited by RAM"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Min Interval"}),(0,t.jsx)(n.td,{children:"1ms"}),(0,t.jsx)(n.td,{children:"1ms+"}),(0,t.jsx)(n.td,{children:"Zephyr timer resolution"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Stack per Task"}),(0,t.jsx)(n.td,{children:"512 words"}),(0,t.jsx)(n.td,{children:"256-2048"}),(0,t.jsx)(n.td,{children:"Adjust for deep call stacks"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Total Work Memory"}),(0,t.jsx)(n.td,{children:"8KB"}),(0,t.jsx)(n.td,{children:"4-32KB"}),(0,t.jsx)(n.td,{children:"Shared across tasks"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"shell-commands",children:"Shell Commands"}),"\n",(0,t.jsx)(n.p,{children:"Monitor the scheduler via serial shell:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Show scheduler status\nzplc sched status\n# Output:\n# Scheduler: RUNNING\n# Tasks: 3 active\n# Tick: 847234ms\n# Overruns: 0\n\n# List all tasks\nzplc sched tasks\n# Output:\n# ID  Name          Interval  Priority  Runs     Last Cycle\n# 0   FastLoop      10ms      0         84723    847\u03bcs\n# 1   MainLogic     100ms     1         8472     1.2ms\n# 2   Diagnostics   1000ms    5         847      0.3ms\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-keep-fast-tasks-fast",children:"1. Keep Fast Tasks Fast"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-st",children:"(* BAD: Heavy computation in 10ms task *)\nFOR i := 1 TO 1000 DO\n    complex_calculation();  (* This will cause overruns! *)\nEND_FOR;\n\n(* GOOD: Spread computation across cycles *)\nIF cycle_index < 100 THEN\n    partial_calculation(cycle_index);\n    cycle_index := cycle_index + 1;\nELSE\n    cycle_index := 0;\nEND_IF;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-avoid-blocking-operations",children:"2. Avoid Blocking Operations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["No ",(0,t.jsx)(n.code,{children:"DELAY()"})," or ",(0,t.jsx)(n.code,{children:"SLEEP()"})," inside tasks"]}),"\n",(0,t.jsx)(n.li,{children:"Use state machines with timers instead"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-minimize-shared-data",children:"3. Minimize Shared Data"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-st",children:"(* GOOD: Local buffer, copy to shared only when needed *)\nVAR\n    local_buffer : ARRAY[0..99] OF REAL;\nEND_VAR\n\n(* Process locally *)\nFOR i := 0 TO 99 DO\n    local_buffer[i] := process(input[i]);\nEND_FOR;\n\n(* Single atomic update to shared *)\nshared_result := local_buffer[50];\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-use-appropriate-priorities",children:"4. Use Appropriate Priorities"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Priority"}),(0,t.jsx)(n.th,{children:"Use Case"}),(0,t.jsx)(n.th,{children:"Typical Interval"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"Safety interlocks"}),(0,t.jsx)(n.td,{children:"1-5ms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"Motion control"}),(0,t.jsx)(n.td,{children:"5-20ms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{children:"Process control"}),(0,t.jsx)(n.td,{children:"50-100ms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"3-5"}),(0,t.jsx)(n.td,{children:"HMI, logging"}),(0,t.jsx)(n.td,{children:"200-1000ms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"10+"}),(0,t.jsx)(n.td,{children:"Background tasks"}),(0,t.jsx)(n.td,{children:"5000ms+"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"task-overruns",children:"Task Overruns"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptom"}),": Scheduler reports overruns, timing jitter"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Cause"}),": Task execution exceeds its interval"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Profile with ",(0,t.jsx)(n.code,{children:"zplc dbg info"})," to find slow cycles"]}),"\n",(0,t.jsx)(n.li,{children:"Move heavy logic to slower task"}),"\n",(0,t.jsx)(n.li,{children:"Increase interval if possible"}),"\n",(0,t.jsx)(n.li,{children:"Optimize algorithm"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"inter-task-race-conditions",children:"Inter-Task Race Conditions"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptom"}),": Glitches when reading shared variables"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use atomic types for shared data"}),"\n",(0,t.jsx)(n.li,{children:"Read/write complete structures, not individual fields"}),"\n",(0,t.jsx)(n.li,{children:"Consider double-buffering for arrays"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);