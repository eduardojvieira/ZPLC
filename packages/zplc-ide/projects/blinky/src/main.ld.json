{
  "$schema": "./schemas/ld.schema.json",
  "name": "Blinky",
  "description": "ZPLC Blinky - Ladder Diagram with oscillating timer pattern",
  "version": "2.1.0",
  "variables": {
    "local": [
      {
        "name": "BlinkTimer",
        "type": "TON",
        "comment": "Timer for 500ms blink interval"
      }
    ],
    "outputs": [
      {
        "name": "LED_Output",
        "type": "BOOL",
        "address": "%Q0.0",
        "comment": "Physical LED output"
      }
    ]
  },
  "rungs": [
    {
      "id": "rung_1",
      "number": 1,
      "comment": "Oscillating Timer - runs when output is OFF, times 500ms",
      "gridConfig": {
        "cols": 8,
        "rows": 1,
        "cellWidth": 80,
        "cellHeight": 60
      },
      "grid": [
        [
          {
            "element": {
              "id": "nc_output",
              "type": "contact_nc",
              "variable": "LED_Output",
              "row": 0,
              "col": 0
            },
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": {
              "id": "ton_blink",
              "type": "function_block",
              "fbType": "TON",
              "instance": "BlinkTimer",
              "parameters": {
                "IN": "CONNECTED",
                "PT": "T#500ms"
              },
              "row": 0,
              "col": 7
            },
            "hasWire": true
          }
        ]
      ],
      "branches": []
    },
    {
      "id": "rung_2",
      "number": 2,
      "comment": "LED Output - SET when timer done, self-resets when timer restarts",
      "gridConfig": {
        "cols": 8,
        "rows": 1,
        "cellWidth": 80,
        "cellHeight": 60
      },
      "grid": [
        [
          {
            "element": {
              "id": "timer_done",
              "type": "contact_no",
              "variable": "BlinkTimer.Q",
              "row": 0,
              "col": 0
            },
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": null,
            "hasWire": true
          },
          {
            "element": {
              "id": "coil_led",
              "type": "coil",
              "variable": "LED_Output",
              "row": 0,
              "col": 7
            },
            "hasWire": true
          }
        ]
      ],
      "branches": []
    }
  ],
  "metadata": {
    "author": "ZPLC Team",
    "created": "2024-12-27",
    "modified": "2026-01-02",
    "iecStandard": "IEC 61131-3",
    "notes": [
      "This is a classic PLC oscillator pattern:",
      "1. Rung 1: Timer runs while LED_Output is FALSE (NC contact passes power)",
      "2. When timer.Q becomes TRUE, Rung 2 turns LED_Output ON",
      "3. LED_Output ON opens the NC contact in Rung 1, resetting timer",
      "4. Timer resets (Q=FALSE), Rung 2 turns LED_Output OFF",
      "5. LED_Output OFF closes NC contact, timer starts again",
      "Result: LED toggles every 500ms",
      "",
      "This pattern avoids race conditions because:",
      "- Only ONE coil assignment to LED_Output exists",
      "- The feedback loop naturally creates the oscillation"
    ]
  }
}