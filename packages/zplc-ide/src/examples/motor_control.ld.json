{
  "$schema": "./schemas/ld.schema.json",
  "name": "MotorControl",
  "description": "Motor Start/Stop with Parallel Branches (LD Branching Demo)",
  "version": "1.0.0",

  "variables": {
    "local": [
      {
        "name": "MotorRunning",
        "type": "BOOL",
        "initialValue": false,
        "comment": "Motor running latch"
      }
    ],
    "inputs": [
      {
        "name": "StartPB",
        "type": "BOOL",
        "address": "%I0.0",
        "comment": "Start pushbutton"
      },
      {
        "name": "StopPB",
        "type": "BOOL",
        "address": "%I0.1",
        "comment": "Stop pushbutton (NC)"
      },
      {
        "name": "Overload",
        "type": "BOOL",
        "address": "%I0.2",
        "comment": "Overload relay contact"
      }
    ],
    "outputs": [
      {
        "name": "MotorContactor",
        "type": "BOOL",
        "address": "%Q0.0",
        "comment": "Motor contactor output"
      },
      {
        "name": "RunningLamp",
        "type": "BOOL",
        "address": "%Q0.1",
        "comment": "Motor running indicator"
      }
    ]
  },

  "rungs": [
    {
      "id": "rung_1",
      "number": 1,
      "comment": "Motor Start/Stop with Seal-In (Parallel Branch Demo)",
      "grid": [
        [
          { "element": { "id": "stop_nc", "type": "contact_nc", "variable": "StopPB", "row": 0, "col": 0 }, "hasWire": true },
          { "element": { "id": "overload_nc", "type": "contact_nc", "variable": "Overload", "row": 0, "col": 1 }, "hasWire": true },
          { "element": { "id": "start_no", "type": "contact_no", "variable": "StartPB", "row": 0, "col": 2 }, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": { "id": "motor_coil", "type": "coil", "variable": "MotorContactor", "row": 0, "col": 7 }, "hasWire": true }
        ],
        [
          { "element": null, "hasWire": false },
          { "element": null, "hasWire": false },
          { "element": { "id": "seal_in", "type": "contact_no", "variable": "MotorRunning", "row": 1, "col": 2 }, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": false },
          { "element": null, "hasWire": false },
          { "element": null, "hasWire": false }
        ]
      ],
      "branches": [
        {
          "id": "branch_seal_in",
          "startCol": 2,
          "endCol": 4,
          "rows": [0, 1]
        }
      ],
      "gridConfig": {
        "cols": 8,
        "rows": 2,
        "cellWidth": 80,
        "cellHeight": 60
      }
    },
    {
      "id": "rung_2",
      "number": 2,
      "comment": "Latch Motor Running State",
      "grid": [
        [
          { "element": { "id": "contactor_no", "type": "contact_no", "variable": "MotorContactor", "row": 0, "col": 0 }, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": { "id": "running_set", "type": "coil_set", "variable": "MotorRunning", "row": 0, "col": 7 }, "hasWire": true }
        ]
      ],
      "gridConfig": {
        "cols": 8,
        "rows": 1,
        "cellWidth": 80,
        "cellHeight": 60
      }
    },
    {
      "id": "rung_3",
      "number": 3,
      "comment": "Reset Motor Running on Stop or Overload",
      "grid": [
        [
          { "element": { "id": "stop_contact", "type": "contact_no", "variable": "StopPB", "row": 0, "col": 0 }, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": { "id": "running_reset", "type": "coil_reset", "variable": "MotorRunning", "row": 0, "col": 7 }, "hasWire": true }
        ],
        [
          { "element": { "id": "overload_contact", "type": "contact_no", "variable": "Overload", "row": 1, "col": 0 }, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": false }
        ]
      ],
      "branches": [
        {
          "id": "branch_or_stop",
          "startCol": 0,
          "endCol": 6,
          "rows": [0, 1]
        }
      ],
      "gridConfig": {
        "cols": 8,
        "rows": 2,
        "cellWidth": 80,
        "cellHeight": 60
      }
    },
    {
      "id": "rung_4",
      "number": 4,
      "comment": "Running Indicator Lamp",
      "grid": [
        [
          { "element": { "id": "running_indicator", "type": "contact_no", "variable": "MotorRunning", "row": 0, "col": 0 }, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": null, "hasWire": true },
          { "element": { "id": "lamp_coil", "type": "coil", "variable": "RunningLamp", "row": 0, "col": 7 }, "hasWire": true }
        ]
      ],
      "gridConfig": {
        "cols": 8,
        "rows": 1,
        "cellWidth": 80,
        "cellHeight": 60
      }
    }
  ],

  "metadata": {
    "author": "ZPLC Team",
    "created": "2024-12-24",
    "iecStandard": "IEC 61131-3",
    "notes": "This example demonstrates parallel branching in LD for a motor start/stop circuit with seal-in logic."
  }
}
