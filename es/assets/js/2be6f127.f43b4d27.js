"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1e3],{5803(e,d,s){s.r(d),s.d(d,{assets:()=>l,contentTitle:()=>c,default:()=>j,frontMatter:()=>t,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"runtime/isa","title":"ZPLC Virtual Machine - Instruction Set Architecture (ISA)","description":"Version: 1.2.0 (Stable)","source":"@site/docs/runtime/isa.md","sourceDirName":"runtime","slug":"/runtime/isa","permalink":"/ZPLC/es/docs/runtime/isa","draft":false,"unlisted":false,"editUrl":"https://github.com/eduardojvieira/ZPLC/tree/master/docs/docs/runtime/isa.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ZPLC v1.1: Technical Specification & Architecture","permalink":"/ZPLC/es/docs/runtime/intro"},"next":{"title":"Multitask Scheduler","permalink":"/ZPLC/es/docs/runtime/scheduler"}}');var i=s(4848),r=s(8453);const t={},c="ZPLC Virtual Machine - Instruction Set Architecture (ISA)",l={},h=[{value:"1. Overview",id:"1-overview",level:2},{value:"1.1 Design Decisions",id:"11-design-decisions",level:3},{value:"2. Memory Model",id:"2-memory-model",level:2},{value:"2.1 Memory Regions",id:"21-memory-regions",level:3},{value:"2.2 The Evaluation Stack",id:"22-the-evaluation-stack",level:3},{value:"2.3 Call Stack",id:"23-call-stack",level:3},{value:"3. Data Types",id:"3-data-types",level:2},{value:"3.1 Elementary Types",id:"31-elementary-types",level:3},{value:"3.2 STRING Type Layout",id:"32-string-type-layout",level:3},{value:"3.3 Type Categories",id:"33-type-categories",level:3},{value:"4. Instruction Set",id:"4-instruction-set",level:2},{value:"4.1 Instruction Encoding",id:"41-instruction-encoding",level:3},{value:"4.2 Opcode Table",id:"42-opcode-table",level:3},{value:"4.2.1 System Operations (0x00-0x0F)",id:"421-system-operations-0x00-0x0f",level:4},{value:"4.2.2 Stack Operations (0x10-0x1F)",id:"422-stack-operations-0x10-0x1f",level:4},{value:"4.2.3 Load/Store Operations (0x20-0x3F)",id:"423-loadstore-operations-0x20-0x3f",level:4},{value:"4.2.4 Arithmetic Operations (0x20-0x2F)",id:"424-arithmetic-operations-0x20-0x2f",level:4},{value:"4.2.5 Logical/Bitwise Operations (0x30-0x3F)",id:"425-logicalbitwise-operations-0x30-0x3f",level:4},{value:"4.2.6 Comparison Operations (0x38-0x3F)",id:"426-comparison-operations-0x38-0x3f",level:4},{value:"4.2.7 Control Flow Operations (0x90-0x9F)",id:"427-control-flow-operations-0x90-0x9f",level:4},{value:"4.2.8 Type Conversion (0xA0-0xAF)",id:"428-type-conversion-0xa0-0xaf",level:4},{value:"5. Binary File Format (<code>.zplc</code>)",id:"5-binary-file-format-zplc",level:2},{value:"5.1 File Structure",id:"51-file-structure",level:3},{value:"5.2 File Header (32 bytes)",id:"52-file-header-32-bytes",level:3},{value:"5.3 Flags Field",id:"53-flags-field",level:3},{value:"5.4 Segment Table Entry (8 bytes each)",id:"54-segment-table-entry-8-bytes-each",level:3},{value:"5.5 Task Definition (16 bytes each)",id:"55-task-definition-16-bytes-each",level:3},{value:"5.6 I/O Map Entry (8 bytes each)",id:"56-io-map-entry-8-bytes-each",level:3},{value:"6. Execution Model",id:"6-execution-model",level:2},{value:"6.1 Scan Cycle",id:"61-scan-cycle",level:3},{value:"6.2 VM State",id:"62-vm-state",level:3},{value:"6.3 Error Handling",id:"63-error-handling",level:3},{value:"7. Example Programs",id:"7-example-programs",level:2},{value:"7.1 Simple Addition: <code>C := A + B</code>",id:"71-simple-addition-c--a--b",level:3},{value:"7.2 Conditional: <code>IF A &gt; 10 THEN B := 1 END_IF</code>",id:"72-conditional-if-a--10-then-b--1-end_if",level:3},{value:"8. Revision History",id:"8-revision-history",level:2},{value:"Appendix A: Opcode Quick Reference",id:"appendix-a-opcode-quick-reference",level:2}];function x(e){const d={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.header,{children:(0,i.jsx)(d.h1,{id:"zplc-virtual-machine---instruction-set-architecture-isa",children:"ZPLC Virtual Machine - Instruction Set Architecture (ISA)"})}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.strong,{children:"Version:"})," 1.2.0 (Stable)\n",(0,i.jsx)(d.strong,{children:"Status:"})," Released\n",(0,i.jsx)(d.strong,{children:"Last Updated:"})," December 2025"]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"1-overview",children:"1. Overview"}),"\n",(0,i.jsxs)(d.p,{children:["The ZPLC Virtual Machine is a ",(0,i.jsx)(d.strong,{children:"stack-based bytecode interpreter"})," designed for deterministic execution of IEC 61131-3 programs. It prioritizes:"]}),"\n",(0,i.jsxs)(d.ol,{children:["\n",(0,i.jsxs)(d.li,{children:[(0,i.jsx)(d.strong,{children:"Portability:"})," Runs on 8-bit MCUs to 64-bit servers"]}),"\n",(0,i.jsxs)(d.li,{children:[(0,i.jsx)(d.strong,{children:"Determinism:"})," Predictable execution time for real-time guarantees"]}),"\n",(0,i.jsxs)(d.li,{children:[(0,i.jsx)(d.strong,{children:"Simplicity:"})," Easy to implement, debug, and verify"]}),"\n",(0,i.jsxs)(d.li,{children:[(0,i.jsx)(d.strong,{children:"Compactness:"})," Minimal bytecode size for constrained devices"]}),"\n"]}),"\n",(0,i.jsx)(d.h3,{id:"11-design-decisions",children:"1.1 Design Decisions"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Decision"}),(0,i.jsx)(d.th,{children:"Rationale"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"Stack-based"}),(0,i.jsx)(d.td,{children:"Simpler codegen than register-based; no register allocation needed"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"Fixed-width opcodes"}),(0,i.jsx)(d.td,{children:"1-byte opcode + optional operand; predictable decode"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"Little-endian"}),(0,i.jsx)(d.td,{children:"Matches ARM, x86, ESP32 - our primary targets"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"32-bit aligned data"}),(0,i.jsx)(d.td,{children:"Performance on modern CPUs; simplifies memory access"})]})]})]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"2-memory-model",children:"2. Memory Model"}),"\n",(0,i.jsxs)(d.p,{children:["The VM operates on four distinct memory regions. The core ",(0,i.jsx)(d.strong,{children:"never"})," accesses hardware directly - all I/O goes through the HAL which updates the Process Images."]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    ZPLC Memory Layout                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  0x0000 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502         \u2502  Input Process Image \u2502 \u25c4\u2500\u2500 HAL writes, VM reads   \u2502\n\u2502         \u2502        (IPI)         \u2502     Updated at cycle start \u2502\n\u2502  0x0FFF \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502  0x1000 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502         \u2502 Output Process Image \u2502 \u25c4\u2500\u2500 VM writes, HAL reads   \u2502\n\u2502         \u2502        (OPI)         \u2502     Flushed at cycle end   \u2502\n\u2502  0x1FFF \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502  0x2000 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502         \u2502    Work Memory       \u2502 \u25c4\u2500\u2500 Temporaries, locals    \u2502\n\u2502         \u2502   (Stack + Heap)     \u2502     Cleared each cycle     \u2502\n\u2502  0x3FFF \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502  0x4000 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502         \u2502  Retentive Memory    \u2502 \u25c4\u2500\u2500 Survives power cycle   \u2502\n\u2502         \u2502      (RETAIN)        \u2502     Backed by HAL persist  \u2502\n\u2502  0x4FFF \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502  0x5000 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502         \u2502    Code Segment      \u2502 \u25c4\u2500\u2500 Bytecode (read-only)   \u2502\n\u2502         \u2502                      \u2502                            \u2502\n\u2502         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(d.h3,{id:"21-memory-regions",children:"2.1 Memory Regions"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Region"}),(0,i.jsx)(d.th,{children:"Base Address"}),(0,i.jsx)(d.th,{children:"Size"}),(0,i.jsx)(d.th,{children:"Access"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"IPI"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x0000"})}),(0,i.jsx)(d.td,{children:"4 KB"}),(0,i.jsx)(d.td,{children:"Read"}),(0,i.jsx)(d.td,{children:"Input Process Image - mirrors physical inputs"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"OPI"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x1000"})}),(0,i.jsx)(d.td,{children:"4 KB"}),(0,i.jsx)(d.td,{children:"Write"}),(0,i.jsx)(d.td,{children:"Output Process Image - mirrors physical outputs"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"WORK"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x2000"})}),(0,i.jsx)(d.td,{children:"8 KB"}),(0,i.jsx)(d.td,{children:"R/W"}),(0,i.jsx)(d.td,{children:"Stack and heap for temporaries"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"RETAIN"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x4000"})}),(0,i.jsx)(d.td,{children:"4 KB"}),(0,i.jsx)(d.td,{children:"R/W"}),(0,i.jsx)(d.td,{children:"Retentive variables (battery-backed)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"CODE"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x5000"})}),(0,i.jsx)(d.td,{children:"44 KB"}),(0,i.jsx)(d.td,{children:"Read"}),(0,i.jsx)(d.td,{children:"Program bytecode"})]})]})]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.strong,{children:"Note:"})," These are logical addresses within the VM. Actual memory allocation is implementation-defined."]}),"\n",(0,i.jsx)(d.h3,{id:"22-the-evaluation-stack",children:"2.2 The Evaluation Stack"}),"\n",(0,i.jsx)(d.p,{children:"The VM uses an evaluation stack for all operations. The stack:"}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsxs)(d.li,{children:["Grows upward from ",(0,i.jsx)(d.code,{children:"WORK"})," base address"]}),"\n",(0,i.jsx)(d.li,{children:"Maximum depth: 256 entries (configurable)"}),"\n",(0,i.jsx)(d.li,{children:"Each entry is 32 bits (4 bytes) for uniformity"}),"\n",(0,i.jsx)(d.li,{children:"Smaller types (BOOL, SINT) are zero/sign-extended to 32 bits"}),"\n"]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{children:"Stack Pointer (SP) \u2500\u2500\u25ba \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                       \u2502   Top - 0   \u2502  \u25c4\u2500\u2500 Most recent push\n                       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n                       \u2502   Top - 1   \u2502\n                       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n                       \u2502   Top - 2   \u2502\n                       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n                       \u2502     ...     \u2502\n                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(d.h3,{id:"23-call-stack",children:"2.3 Call Stack"}),"\n",(0,i.jsx)(d.p,{children:"Separate from the evaluation stack, used for CALL/RET:"}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsx)(d.li,{children:"Maximum depth: 32 calls (prevents runaway recursion)"}),"\n",(0,i.jsx)(d.li,{children:"Each frame stores: Return Address (16-bit) + Base Pointer (16-bit)"}),"\n"]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"3-data-types",children:"3. Data Types"}),"\n",(0,i.jsx)(d.p,{children:"IEC 61131-3 defines standard data types. We map them to type IDs for the VM."}),"\n",(0,i.jsx)(d.h3,{id:"31-elementary-types",children:"3.1 Elementary Types"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"IEC Type"}),(0,i.jsx)(d.th,{children:"Type ID"}),(0,i.jsx)(d.th,{children:"Size (bytes)"}),(0,i.jsx)(d.th,{children:"Range"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"BOOL"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x01"})}),(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:"0, 1"}),(0,i.jsx)(d.td,{children:"Boolean"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"SINT"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x02"})}),(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:"-128 to 127"}),(0,i.jsx)(d.td,{children:"Signed 8-bit integer"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"USINT"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x03"})}),(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:"0 to 255"}),(0,i.jsx)(d.td,{children:"Unsigned 8-bit integer"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"INT"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x04"})}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:"-32768 to 32767"}),(0,i.jsx)(d.td,{children:"Signed 16-bit integer"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"UINT"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x05"})}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:"0 to 65535"}),(0,i.jsx)(d.td,{children:"Unsigned 16-bit integer"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"DINT"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x06"})}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:"-2^31 to 2^31-1"}),(0,i.jsx)(d.td,{children:"Signed 32-bit integer"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"UDINT"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x07"})}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:"0 to 2^32-1"}),(0,i.jsx)(d.td,{children:"Unsigned 32-bit integer"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"LINT"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x08"})}),(0,i.jsx)(d.td,{children:"8"}),(0,i.jsx)(d.td,{children:"-2^63 to 2^63-1"}),(0,i.jsx)(d.td,{children:"Signed 64-bit integer"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"ULINT"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x09"})}),(0,i.jsx)(d.td,{children:"8"}),(0,i.jsx)(d.td,{children:"0 to 2^64-1"}),(0,i.jsx)(d.td,{children:"Unsigned 64-bit integer"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"REAL"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x0A"})}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:"IEEE 754"}),(0,i.jsx)(d.td,{children:"32-bit float"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"LREAL"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x0B"})}),(0,i.jsx)(d.td,{children:"8"}),(0,i.jsx)(d.td,{children:"IEEE 754"}),(0,i.jsx)(d.td,{children:"64-bit float"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"TIME"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x0C"})}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:"ms as DINT"}),(0,i.jsx)(d.td,{children:"Time duration"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"BYTE"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x10"})}),(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:"8 bits"}),(0,i.jsx)(d.td,{children:"Bit string"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"WORD"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x11"})}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:"16 bits"}),(0,i.jsx)(d.td,{children:"Bit string"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"DWORD"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x12"})}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:"32 bits"}),(0,i.jsx)(d.td,{children:"Bit string"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"LWORD"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x13"})}),(0,i.jsx)(d.td,{children:"8"}),(0,i.jsx)(d.td,{children:"64 bits"}),(0,i.jsx)(d.td,{children:"Bit string"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"STRING"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x14"})}),(0,i.jsx)(d.td,{children:"Variable"}),(0,i.jsx)(d.td,{children:"See below"}),(0,i.jsx)(d.td,{children:"Character string"})]})]})]}),"\n",(0,i.jsx)(d.h3,{id:"32-string-type-layout",children:"3.2 STRING Type Layout"}),"\n",(0,i.jsx)(d.p,{children:"IEC 61131-3 strings are fixed-capacity with dynamic length. ZPLC uses this memory layout:"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 current_len   \u2502 max_capacity  \u2502      data[]          \u2502\n\u2502   (2 bytes)   \u2502   (2 bytes)   \u2502  (max_capacity + 1)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     Offset 0        Offset 2         Offset 4\n"})}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Field"}),(0,i.jsx)(d.th,{children:"Size"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"current_len"})}),(0,i.jsx)(d.td,{children:"2 bytes"}),(0,i.jsx)(d.td,{children:"Current string length (0 to max_capacity)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"max_capacity"})}),(0,i.jsx)(d.td,{children:"2 bytes"}),(0,i.jsx)(d.td,{children:"Maximum characters (default: 80, max: 255)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"data"})}),(0,i.jsx)(d.td,{children:"capacity+1"}),(0,i.jsx)(d.td,{children:"Null-terminated character data"})]})]})]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.strong,{children:"Total size:"})," 4 + max_capacity + 1 bytes"]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.strong,{children:"Example:"})," A ",(0,i.jsx)(d.code,{children:"STRING[80]"})," occupies 85 bytes (4 header + 80 chars + 1 null)."]}),"\n",(0,i.jsx)(d.h3,{id:"33-type-categories",children:"3.3 Type Categories"}),"\n",(0,i.jsx)(d.p,{children:"For opcode suffixes, types are grouped:"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Category"}),(0,i.jsx)(d.th,{children:"Code"}),(0,i.jsx)(d.th,{children:"Types"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"Boolean"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"B"})}),(0,i.jsx)(d.td,{children:"BOOL"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"Integer"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"I"})}),(0,i.jsx)(d.td,{children:"SINT, USINT, INT, UINT, DINT, UDINT, LINT, ULINT"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"Real"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"R"})}),(0,i.jsx)(d.td,{children:"REAL, LREAL"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"Any"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"A"})}),(0,i.jsx)(d.td,{children:"All types (generic operations)"})]})]})]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"4-instruction-set",children:"4. Instruction Set"}),"\n",(0,i.jsx)(d.h3,{id:"41-instruction-encoding",children:"4.1 Instruction Encoding"}),"\n",(0,i.jsx)(d.p,{children:"Instructions are variable-length for compactness:"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Opcode  \u2502           Operand (optional)       \u2502\n\u2502  1 byte  \u2502     0, 1, 2, or 4 bytes            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode Range"}),(0,i.jsx)(d.th,{children:"Operand Size"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x00-0x3F"})}),(0,i.jsx)(d.td,{children:"0 bytes"}),(0,i.jsx)(d.td,{children:"Simple ops (NOP, ADD, RET, etc.)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x40-0x7F"})}),(0,i.jsx)(d.td,{children:"1 byte"}),(0,i.jsx)(d.td,{children:"Ops with 8-bit immediate/offset"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x80-0xBF"})}),(0,i.jsx)(d.td,{children:"2 bytes"}),(0,i.jsx)(d.td,{children:"Ops with 16-bit address/offset"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xC0-0xFF"})}),(0,i.jsx)(d.td,{children:"4 bytes"}),(0,i.jsx)(d.td,{children:"Ops with 32-bit immediate"})]})]})]}),"\n",(0,i.jsx)(d.h3,{id:"42-opcode-table",children:"4.2 Opcode Table"}),"\n",(0,i.jsx)(d.h4,{id:"421-system-operations-0x00-0x0f",children:"4.2.1 System Operations (0x00-0x0F)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode"}),(0,i.jsx)(d.th,{children:"Mnemonic"}),(0,i.jsx)(d.th,{children:"Operand"}),(0,i.jsx)(d.th,{children:"Stack Effect"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x00"})}),(0,i.jsx)(d.td,{children:"NOP"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"No operation"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x01"})}),(0,i.jsx)(d.td,{children:"HALT"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"Stop execution"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x02"})}),(0,i.jsx)(d.td,{children:"BREAK"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"Debugger breakpoint"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x03"})}),(0,i.jsx)(d.td,{children:"GET_TICKS"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(\u2192 ms)"}),(0,i.jsx)(d.td,{children:"Push system tick counter (milliseconds)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x0F"})}),(0,i.jsx)(d.td,{children:"RESERVED"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"Reserved for future"})]})]})]}),"\n",(0,i.jsx)(d.h4,{id:"422-stack-operations-0x10-0x1f",children:"4.2.2 Stack Operations (0x10-0x1F)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode"}),(0,i.jsx)(d.th,{children:"Mnemonic"}),(0,i.jsx)(d.th,{children:"Operand"}),(0,i.jsx)(d.th,{children:"Stack Effect"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x10"})}),(0,i.jsx)(d.td,{children:"DUP"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a \u2192 a a)"}),(0,i.jsx)(d.td,{children:"Duplicate top"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x11"})}),(0,i.jsx)(d.td,{children:"DROP"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a \u2192 )"}),(0,i.jsx)(d.td,{children:"Discard top"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x12"})}),(0,i.jsx)(d.td,{children:"SWAP"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 b a)"}),(0,i.jsx)(d.td,{children:"Swap top two"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x13"})}),(0,i.jsx)(d.td,{children:"OVER"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a b a)"}),(0,i.jsx)(d.td,{children:"Copy second to top"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x14"})}),(0,i.jsx)(d.td,{children:"ROT"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b c \u2192 b c a)"}),(0,i.jsx)(d.td,{children:"Rotate top three"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x15"})}),(0,i.jsx)(d.td,{children:"LOADI8"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(addr \u2192 val)"}),(0,i.jsx)(d.td,{children:"Load 8-bit from address on stack"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x16"})}),(0,i.jsx)(d.td,{children:"LOADI32"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(addr \u2192 val)"}),(0,i.jsx)(d.td,{children:"Load 32-bit from address on stack"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x17"})}),(0,i.jsx)(d.td,{children:"STOREI8"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(addr val \u2192)"}),(0,i.jsx)(d.td,{children:"Store 8-bit to address on stack"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x18"})}),(0,i.jsx)(d.td,{children:"STOREI32"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(addr val \u2192)"}),(0,i.jsx)(d.td,{children:"Store 32-bit to address on stack"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x19"})}),(0,i.jsx)(d.td,{children:"LOADI16"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(addr \u2192 val)"}),(0,i.jsx)(d.td,{children:"Load 16-bit from address on stack"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x1A"})}),(0,i.jsx)(d.td,{children:"STOREI16"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(addr val \u2192)"}),(0,i.jsx)(d.td,{children:"Store 16-bit to address on stack"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x1B"})}),(0,i.jsx)(d.td,{children:"STRLEN"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(str \u2192 len)"}),(0,i.jsx)(d.td,{children:"Get string length"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x1C"})}),(0,i.jsx)(d.td,{children:"STRCPY"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(src dst \u2192)"}),(0,i.jsx)(d.td,{children:"Copy string (bounds-checked)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x1D"})}),(0,i.jsx)(d.td,{children:"STRCAT"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(src dst \u2192)"}),(0,i.jsx)(d.td,{children:"Concatenate strings (bounds-checked)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x1E"})}),(0,i.jsx)(d.td,{children:"STRCMP"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(s1 s2 \u2192 cmp)"}),(0,i.jsx)(d.td,{children:"Compare strings (-1, 0, 1)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x1F"})}),(0,i.jsx)(d.td,{children:"STRCLR"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(str \u2192)"}),(0,i.jsx)(d.td,{children:"Clear string to empty"})]})]})]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.strong,{children:"Indirect Memory Access (v1.2):"})," The ",(0,i.jsx)(d.code,{children:"LOADI*"})," and ",(0,i.jsx)(d.code,{children:"STOREI*"})," opcodes enable computed address access, essential for implementing arrays, FIFO/LIFO buffers, and other data structures. The address is taken from the stack rather than encoded in the instruction."]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.strong,{children:"String Operations (v1.2):"})," The string opcodes operate on the STRING memory layout (see Section 3.2). All operations are bounds-checked and will truncate rather than overflow. STRCPY and STRCAT respect the destination's ",(0,i.jsx)(d.code,{children:"max_capacity"})," field."]}),"\n",(0,i.jsx)(d.h4,{id:"423-loadstore-operations-0x20-0x3f",children:"4.2.3 Load/Store Operations (0x20-0x3F)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode"}),(0,i.jsx)(d.th,{children:"Mnemonic"}),(0,i.jsx)(d.th,{children:"Operand"}),(0,i.jsx)(d.th,{children:"Stack Effect"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x80"})}),(0,i.jsx)(d.td,{children:"LOAD8"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(\u2192 val)"}),(0,i.jsx)(d.td,{children:"Load 8-bit from address"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x81"})}),(0,i.jsx)(d.td,{children:"LOAD16"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(\u2192 val)"}),(0,i.jsx)(d.td,{children:"Load 16-bit from address"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x82"})}),(0,i.jsx)(d.td,{children:"LOAD32"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(\u2192 val)"}),(0,i.jsx)(d.td,{children:"Load 32-bit from address"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x83"})}),(0,i.jsx)(d.td,{children:"LOAD64"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(\u2192 val_lo val_hi)"}),(0,i.jsx)(d.td,{children:"Load 64-bit (2 stack slots)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x84"})}),(0,i.jsx)(d.td,{children:"STORE8"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(val \u2192)"}),(0,i.jsx)(d.td,{children:"Store 8-bit to address"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x85"})}),(0,i.jsx)(d.td,{children:"STORE16"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(val \u2192)"}),(0,i.jsx)(d.td,{children:"Store 16-bit to address"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x86"})}),(0,i.jsx)(d.td,{children:"STORE32"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(val \u2192)"}),(0,i.jsx)(d.td,{children:"Store 32-bit to address"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x87"})}),(0,i.jsx)(d.td,{children:"STORE64"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(val_lo val_hi \u2192)"}),(0,i.jsx)(d.td,{children:"Store 64-bit"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xC0"})}),(0,i.jsx)(d.td,{children:"PUSH32"}),(0,i.jsx)(d.td,{children:"imm32"}),(0,i.jsx)(d.td,{children:"(\u2192 val)"}),(0,i.jsx)(d.td,{children:"Push 32-bit immediate"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x40"})}),(0,i.jsx)(d.td,{children:"PUSH8"}),(0,i.jsx)(d.td,{children:"imm8"}),(0,i.jsx)(d.td,{children:"(\u2192 val)"}),(0,i.jsx)(d.td,{children:"Push 8-bit immediate (sign-extended)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x41"})}),(0,i.jsx)(d.td,{children:"PICK"}),(0,i.jsx)(d.td,{children:"n8"}),(0,i.jsx)(d.td,{children:"(... \u2192 ... stack[sp-1-n])"}),(0,i.jsx)(d.td,{children:"Copy nth stack element to top"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x88"})}),(0,i.jsx)(d.td,{children:"PUSH16"}),(0,i.jsx)(d.td,{children:"imm16"}),(0,i.jsx)(d.td,{children:"(\u2192 val)"}),(0,i.jsx)(d.td,{children:"Push 16-bit immediate (sign-extended)"})]})]})]}),"\n",(0,i.jsx)(d.h4,{id:"424-arithmetic-operations-0x20-0x2f",children:"4.2.4 Arithmetic Operations (0x20-0x2F)"}),"\n",(0,i.jsx)(d.p,{children:"All arithmetic ops work on 32-bit integers by default. Type suffixes indicate variants."}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode"}),(0,i.jsx)(d.th,{children:"Mnemonic"}),(0,i.jsx)(d.th,{children:"Operand"}),(0,i.jsx)(d.th,{children:"Stack Effect"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x20"})}),(0,i.jsx)(d.td,{children:"ADD"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a+b)"}),(0,i.jsx)(d.td,{children:"Integer addition"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x21"})}),(0,i.jsx)(d.td,{children:"SUB"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a-b)"}),(0,i.jsx)(d.td,{children:"Integer subtraction"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x22"})}),(0,i.jsx)(d.td,{children:"MUL"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a*b)"}),(0,i.jsx)(d.td,{children:"Integer multiplication"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x23"})}),(0,i.jsx)(d.td,{children:"DIV"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a/b)"}),(0,i.jsx)(d.td,{children:"Integer division"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x24"})}),(0,i.jsx)(d.td,{children:"MOD"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a%b)"}),(0,i.jsx)(d.td,{children:"Integer modulo"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x25"})}),(0,i.jsx)(d.td,{children:"NEG"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a \u2192 -a)"}),(0,i.jsx)(d.td,{children:"Integer negation"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x26"})}),(0,i.jsx)(d.td,{children:"ABS"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a \u2192"}),(0,i.jsx)(d.td,{children:"a"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x28"})}),(0,i.jsx)(d.td,{children:"ADDF"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a+b)"}),(0,i.jsx)(d.td,{children:"Float addition"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x29"})}),(0,i.jsx)(d.td,{children:"SUBF"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a-b)"}),(0,i.jsx)(d.td,{children:"Float subtraction"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x2A"})}),(0,i.jsx)(d.td,{children:"MULF"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a*b)"}),(0,i.jsx)(d.td,{children:"Float multiplication"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x2B"})}),(0,i.jsx)(d.td,{children:"DIVF"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a/b)"}),(0,i.jsx)(d.td,{children:"Float division"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x2C"})}),(0,i.jsx)(d.td,{children:"NEGF"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a \u2192 -a)"}),(0,i.jsx)(d.td,{children:"Float negation"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x2D"})}),(0,i.jsx)(d.td,{children:"ABSF"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a \u2192"}),(0,i.jsx)(d.td,{children:"a"})]})]})]}),"\n",(0,i.jsx)(d.h4,{id:"425-logicalbitwise-operations-0x30-0x3f",children:"4.2.5 Logical/Bitwise Operations (0x30-0x3F)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode"}),(0,i.jsx)(d.th,{children:"Mnemonic"}),(0,i.jsx)(d.th,{children:"Operand"}),(0,i.jsx)(d.th,{children:"Stack Effect"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x30"})}),(0,i.jsx)(d.td,{children:"AND"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a&b)"}),(0,i.jsx)(d.td,{children:"Bitwise AND"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x31"})}),(0,i.jsx)(d.td,{children:"OR"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a|b)"}),(0,i.jsx)(d.td,{children:"Bitwise OR"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x32"})}),(0,i.jsx)(d.td,{children:"XOR"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a^b)"}),(0,i.jsx)(d.td,{children:"Bitwise XOR"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x33"})}),(0,i.jsx)(d.td,{children:"NOT"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a \u2192 ~a)"}),(0,i.jsx)(d.td,{children:"Bitwise NOT"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x34"})}),(0,i.jsx)(d.td,{children:"SHL"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a n \u2192 a << n)"}),(0,i.jsx)(d.td,{children:"Shift left"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x35"})}),(0,i.jsx)(d.td,{children:"SHR"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a n \u2192 a >> n)"}),(0,i.jsx)(d.td,{children:"Shift right (logical)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x36"})}),(0,i.jsx)(d.td,{children:"SAR"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a n \u2192 a >> n)"}),(0,i.jsx)(d.td,{children:"Shift right (arithmetic)"})]})]})]}),"\n",(0,i.jsx)(d.h4,{id:"426-comparison-operations-0x38-0x3f",children:"4.2.6 Comparison Operations (0x38-0x3F)"}),"\n",(0,i.jsx)(d.p,{children:"Result is 1 (true) or 0 (false), pushed as 32-bit integer."}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode"}),(0,i.jsx)(d.th,{children:"Mnemonic"}),(0,i.jsx)(d.th,{children:"Operand"}),(0,i.jsx)(d.th,{children:"Stack Effect"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x38"})}),(0,i.jsx)(d.td,{children:"EQ"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a==b)"}),(0,i.jsx)(d.td,{children:"Equal"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x39"})}),(0,i.jsx)(d.td,{children:"NE"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a!=b)"}),(0,i.jsx)(d.td,{children:"Not equal"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x3A"})}),(0,i.jsx)(d.td,{children:"LT"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a < b)"}),(0,i.jsx)(d.td,{children:"Less than (signed)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x3B"})}),(0,i.jsx)(d.td,{children:"LE"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a <= b)"}),(0,i.jsx)(d.td,{children:"Less or equal (signed)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x3C"})}),(0,i.jsx)(d.td,{children:"GT"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a > b)"}),(0,i.jsx)(d.td,{children:"Greater than (signed)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x3D"})}),(0,i.jsx)(d.td,{children:"GE"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a >= b)"}),(0,i.jsx)(d.td,{children:"Greater or equal (signed)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x3E"})}),(0,i.jsx)(d.td,{children:"LTU"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a < b)"}),(0,i.jsx)(d.td,{children:"Less than (unsigned)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x3F"})}),(0,i.jsx)(d.td,{children:"GTU"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(a b \u2192 a > b)"}),(0,i.jsx)(d.td,{children:"Greater than (unsigned)"})]})]})]}),"\n",(0,i.jsx)(d.h4,{id:"427-control-flow-operations-0x90-0x9f",children:"4.2.7 Control Flow Operations (0x90-0x9F)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode"}),(0,i.jsx)(d.th,{children:"Mnemonic"}),(0,i.jsx)(d.th,{children:"Operand"}),(0,i.jsx)(d.th,{children:"Stack Effect"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x90"})}),(0,i.jsx)(d.td,{children:"JMP"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"Unconditional jump"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x91"})}),(0,i.jsx)(d.td,{children:"JZ"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(cond \u2192)"}),(0,i.jsx)(d.td,{children:"Jump if zero (false)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x92"})}),(0,i.jsx)(d.td,{children:"JNZ"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"(cond \u2192)"}),(0,i.jsx)(d.td,{children:"Jump if not zero (true)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x93"})}),(0,i.jsx)(d.td,{children:"CALL"}),(0,i.jsx)(d.td,{children:"addr16"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"Call subroutine"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x94"})}),(0,i.jsx)(d.td,{children:"RET"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"Return from subroutine"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x50"})}),(0,i.jsx)(d.td,{children:"JR"}),(0,i.jsx)(d.td,{children:"off8"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"Relative jump (signed offset)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x51"})}),(0,i.jsx)(d.td,{children:"JRZ"}),(0,i.jsx)(d.td,{children:"off8"}),(0,i.jsx)(d.td,{children:"(cond \u2192)"}),(0,i.jsx)(d.td,{children:"Relative jump if zero"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0x52"})}),(0,i.jsx)(d.td,{children:"JRNZ"}),(0,i.jsx)(d.td,{children:"off8"}),(0,i.jsx)(d.td,{children:"(cond \u2192)"}),(0,i.jsx)(d.td,{children:"Relative jump if not zero"})]})]})]}),"\n",(0,i.jsx)(d.h4,{id:"428-type-conversion-0xa0-0xaf",children:"4.2.8 Type Conversion (0xA0-0xAF)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Opcode"}),(0,i.jsx)(d.th,{children:"Mnemonic"}),(0,i.jsx)(d.th,{children:"Operand"}),(0,i.jsx)(d.th,{children:"Stack Effect"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xA0"})}),(0,i.jsx)(d.td,{children:"I2F"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(int \u2192 float)"}),(0,i.jsx)(d.td,{children:"Integer to float"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xA1"})}),(0,i.jsx)(d.td,{children:"F2I"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(float \u2192 int)"}),(0,i.jsx)(d.td,{children:"Float to integer (truncate)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xA2"})}),(0,i.jsx)(d.td,{children:"I2B"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(int \u2192 bool)"}),(0,i.jsx)(d.td,{children:"Integer to boolean"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xA3"})}),(0,i.jsx)(d.td,{children:"EXT8"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(i8 \u2192 i32)"}),(0,i.jsx)(d.td,{children:"Sign-extend 8-bit"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xA4"})}),(0,i.jsx)(d.td,{children:"EXT16"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(i16 \u2192 i32)"}),(0,i.jsx)(d.td,{children:"Sign-extend 16-bit"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xA5"})}),(0,i.jsx)(d.td,{children:"ZEXT8"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(u8 \u2192 u32)"}),(0,i.jsx)(d.td,{children:"Zero-extend 8-bit"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"0xA6"})}),(0,i.jsx)(d.td,{children:"ZEXT16"}),(0,i.jsx)(d.td,{children:"-"}),(0,i.jsx)(d.td,{children:"(u16 \u2192 u32)"}),(0,i.jsx)(d.td,{children:"Zero-extend 16-bit"})]})]})]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsxs)(d.h2,{id:"5-binary-file-format-zplc",children:["5. Binary File Format (",(0,i.jsx)(d.code,{children:".zplc"}),")"]}),"\n",(0,i.jsxs)(d.p,{children:["The ",(0,i.jsx)(d.code,{children:".zplc"})," file is the compiled program package. It's designed for:"]}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsx)(d.li,{children:"Fast loading (sequential read, minimal parsing)"}),"\n",(0,i.jsx)(d.li,{children:"Integrity verification (CRC32)"}),"\n",(0,i.jsx)(d.li,{children:"Versioning and compatibility checking"}),"\n"]}),"\n",(0,i.jsx)(d.h3,{id:"51-file-structure",children:"5.1 File Structure"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              File Header (32 bytes)        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502           Segment Table (variable)         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502              Code Segment                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502              Data Segment                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502            Symbol Table (optional)         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502            Debug Info (optional)           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(d.h3,{id:"52-file-header-32-bytes",children:"5.2 File Header (32 bytes)"}),"\n",(0,i.jsxs)(d.p,{children:["All multi-byte values are ",(0,i.jsx)(d.strong,{children:"little-endian"}),"."]}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Offset"}),(0,i.jsx)(d.th,{children:"Size"}),(0,i.jsx)(d.th,{children:"Field"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x00"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"magic"})}),(0,i.jsxs)(d.td,{children:["Magic number: ",(0,i.jsx)(d.code,{children:"0x434C505A"}),' (reads as "ZPLC" in hex dump)']})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x04"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"version_major"})}),(0,i.jsx)(d.td,{children:"Major version (breaking changes)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x06"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"version_minor"})}),(0,i.jsx)(d.td,{children:"Minor version (compatible changes)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x08"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"flags"})}),(0,i.jsx)(d.td,{children:"Feature flags (see below)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x0C"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"crc32"})}),(0,i.jsx)(d.td,{children:"CRC32 of entire file (excluding this field)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x10"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"code_size"})}),(0,i.jsx)(d.td,{children:"Size of code segment in bytes"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x14"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"data_size"})}),(0,i.jsx)(d.td,{children:"Size of data segment in bytes"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x18"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"entry_point"})}),(0,i.jsx)(d.td,{children:"Code offset of main entry"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x1A"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"segment_count"})}),(0,i.jsx)(d.td,{children:"Number of segments"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x1C"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"reserved"})}),(0,i.jsx)(d.td,{children:"Reserved for future use (must be 0)"})]})]})]}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.strong,{children:"Total: 32 bytes"})}),"\n",(0,i.jsx)(d.h3,{id:"53-flags-field",children:"5.3 Flags Field"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Bit"}),(0,i.jsx)(d.th,{children:"Name"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"HAS_DEBUG"})}),(0,i.jsx)(d.td,{children:"Debug segment present"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"HAS_SYMBOLS"})}),(0,i.jsx)(d.td,{children:"Symbol table present"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"HAS_RETAIN"})}),(0,i.jsx)(d.td,{children:"Uses retentive memory"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"3"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SIGNED"})}),(0,i.jsx)(d.td,{children:"Cryptographic signature appended"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"4-31"}),(0,i.jsx)(d.td,{children:"Reserved"}),(0,i.jsx)(d.td,{children:"Must be 0"})]})]})]}),"\n",(0,i.jsx)(d.h3,{id:"54-segment-table-entry-8-bytes-each",children:"5.4 Segment Table Entry (8 bytes each)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Offset"}),(0,i.jsx)(d.th,{children:"Size"}),(0,i.jsx)(d.th,{children:"Field"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x00"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"type"})}),(0,i.jsx)(d.td,{children:"Segment type (see below)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x02"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"flags"})}),(0,i.jsx)(d.td,{children:"Segment-specific flags"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x04"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"size"})}),(0,i.jsx)(d.td,{children:"Segment size in bytes"})]})]})]}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.strong,{children:"Segment Types:"})}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Value"}),(0,i.jsx)(d.th,{children:"Name"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x01"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SEG_CODE"})}),(0,i.jsx)(d.td,{children:"Executable bytecode"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x02"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SEG_DATA"})}),(0,i.jsx)(d.td,{children:"Initialized data (constants)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x03"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SEG_BSS"})}),(0,i.jsx)(d.td,{children:"Uninitialized data (size only)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x04"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SEG_RETAIN"})}),(0,i.jsx)(d.td,{children:"Retentive variable definitions"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x05"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SEG_IOMAP"})}),(0,i.jsx)(d.td,{children:"I/O mapping table"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x10"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SEG_SYMTAB"})}),(0,i.jsx)(d.td,{children:"Symbol table"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x11"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SEG_DEBUG"})}),(0,i.jsx)(d.td,{children:"Debug information"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x20"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"SEG_TASK"})}),(0,i.jsx)(d.td,{children:"Task definitions"})]})]})]}),"\n",(0,i.jsx)(d.h3,{id:"55-task-definition-16-bytes-each",children:"5.5 Task Definition (16 bytes each)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Offset"}),(0,i.jsx)(d.th,{children:"Size"}),(0,i.jsx)(d.th,{children:"Field"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x00"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"id"})}),(0,i.jsx)(d.td,{children:"Task ID"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x02"}),(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"type"})}),(0,i.jsx)(d.td,{children:"0=Cyclic, 1=Event, 2=Init"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x03"}),(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"priority"})}),(0,i.jsx)(d.td,{children:"0=Highest, 255=Lowest"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x04"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"interval_us"})}),(0,i.jsx)(d.td,{children:"Cycle time in microseconds"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x08"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"entry_point"})}),(0,i.jsx)(d.td,{children:"Code offset"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x0A"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"stack_size"})}),(0,i.jsx)(d.td,{children:"Required stack depth"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x0C"}),(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"reserved"})}),(0,i.jsx)(d.td,{children:"Must be 0"})]})]})]}),"\n",(0,i.jsx)(d.h3,{id:"56-io-map-entry-8-bytes-each",children:"5.6 I/O Map Entry (8 bytes each)"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Offset"}),(0,i.jsx)(d.th,{children:"Size"}),(0,i.jsx)(d.th,{children:"Field"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x00"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"var_addr"})}),(0,i.jsx)(d.td,{children:"Variable address in memory"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x02"}),(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"var_type"})}),(0,i.jsx)(d.td,{children:"Data type ID"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x03"}),(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"direction"})}),(0,i.jsx)(d.td,{children:"0=Input, 1=Output"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x04"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"channel"})}),(0,i.jsx)(d.td,{children:"Physical channel number"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x06"}),(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"flags"})}),(0,i.jsx)(d.td,{children:"Bit offset, invert, etc."})]})]})]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"6-execution-model",children:"6. Execution Model"}),"\n",(0,i.jsx)(d.h3,{id:"61-scan-cycle",children:"6.1 Scan Cycle"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    PLC Scan Cycle                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  1. INPUT LATCH                                         \u2502\n\u2502     \u2514\u2500\u2500 HAL reads physical inputs \u2192 IPI                 \u2502\n\u2502                                                         \u2502\n\u2502  2. TASK EXECUTION (by priority)                        \u2502\n\u2502     \u251c\u2500\u2500 Task 0 (highest priority)                       \u2502\n\u2502     \u251c\u2500\u2500 Task 1                                          \u2502\n\u2502     \u2514\u2500\u2500 Task N                                          \u2502\n\u2502                                                         \u2502\n\u2502  3. OUTPUT FLUSH                                        \u2502\n\u2502     \u2514\u2500\u2500 OPI \u2192 HAL writes physical outputs               \u2502\n\u2502                                                         \u2502\n\u2502  4. HOUSEKEEPING                                        \u2502\n\u2502     \u251c\u2500\u2500 Comm handling (Modbus, MQTT)                    \u2502\n\u2502     \u251c\u2500\u2500 Debug protocol                                  \u2502\n\u2502     \u2514\u2500\u2500 Retain memory flush (if dirty)                  \u2502\n\u2502                                                         \u2502\n\u2502  5. CYCLE TIMING                                        \u2502\n\u2502     \u2514\u2500\u2500 Wait until next cycle (if time remains)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(d.h3,{id:"62-vm-state",children:"6.2 VM State"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-c",children:"typedef struct {\n    uint16_t pc;              /* Program Counter */\n    uint16_t sp;              /* Stack Pointer */\n    uint16_t bp;              /* Base Pointer (for locals) */\n    uint8_t  call_depth;      /* Current call nesting */\n    uint8_t  flags;           /* Status flags: Z, C, O, ... */\n    uint32_t stack[256];      /* Evaluation stack */\n    uint16_t call_stack[32];  /* Return addresses */\n} zplc_vm_state_t;\n"})}),"\n",(0,i.jsx)(d.h3,{id:"63-error-handling",children:"6.3 Error Handling"}),"\n",(0,i.jsx)(d.p,{children:"The VM detects and reports:"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Error Code"}),(0,i.jsx)(d.th,{children:"Name"}),(0,i.jsx)(d.th,{children:"Description"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x00"}),(0,i.jsx)(d.td,{children:"OK"}),(0,i.jsx)(d.td,{children:"No error"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x01"}),(0,i.jsx)(d.td,{children:"STACK_OVERFLOW"}),(0,i.jsx)(d.td,{children:"Evaluation stack full"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x02"}),(0,i.jsx)(d.td,{children:"STACK_UNDERFLOW"}),(0,i.jsx)(d.td,{children:"Pop from empty stack"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x03"}),(0,i.jsx)(d.td,{children:"DIV_BY_ZERO"}),(0,i.jsx)(d.td,{children:"Division/modulo by zero"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x04"}),(0,i.jsx)(d.td,{children:"INVALID_OPCODE"}),(0,i.jsx)(d.td,{children:"Unknown instruction"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x05"}),(0,i.jsx)(d.td,{children:"OUT_OF_BOUNDS"}),(0,i.jsx)(d.td,{children:"Memory access violation"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x06"}),(0,i.jsx)(d.td,{children:"CALL_OVERFLOW"}),(0,i.jsx)(d.td,{children:"Call stack full"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x07"}),(0,i.jsx)(d.td,{children:"INVALID_JUMP"}),(0,i.jsx)(d.td,{children:"Jump to invalid address"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0x08"}),(0,i.jsx)(d.td,{children:"WATCHDOG"}),(0,i.jsx)(d.td,{children:"Execution time exceeded"})]})]})]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"7-example-programs",children:"7. Example Programs"}),"\n",(0,i.jsxs)(d.h3,{id:"71-simple-addition-c--a--b",children:["7.1 Simple Addition: ",(0,i.jsx)(d.code,{children:"C := A + B"})]}),"\n",(0,i.jsx)(d.p,{children:"Assuming:"}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsxs)(d.li,{children:[(0,i.jsx)(d.code,{children:"A"})," is at address ",(0,i.jsx)(d.code,{children:"0x0000"})," (IPI)"]}),"\n",(0,i.jsxs)(d.li,{children:[(0,i.jsx)(d.code,{children:"B"})," is at address ",(0,i.jsx)(d.code,{children:"0x0002"})," (IPI)"]}),"\n",(0,i.jsxs)(d.li,{children:[(0,i.jsx)(d.code,{children:"C"})," is at address ",(0,i.jsx)(d.code,{children:"0x1000"})," (OPI)"]}),"\n"]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-asm",children:"; Load A (16-bit from IPI)\nLOAD16  0x0000      ; 81 00 00    Stack: [A]\n\n; Load B (16-bit from IPI)\nLOAD16  0x0002      ; 81 02 00    Stack: [A, B]\n\n; Add them\nADD                 ; 20           Stack: [A+B]\n\n; Store to C (16-bit to OPI)\nSTORE16 0x1000      ; 85 00 10    Stack: []\n"})}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.strong,{children:"Bytecode:"})," ",(0,i.jsx)(d.code,{children:"81 00 00 81 02 00 20 85 00 10"})," (10 bytes)"]}),"\n",(0,i.jsxs)(d.h3,{id:"72-conditional-if-a--10-then-b--1-end_if",children:["7.2 Conditional: ",(0,i.jsx)(d.code,{children:"IF A > 10 THEN B := 1 END_IF"})]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-asm",children:"        LOAD16  0x0000      ; Load A\n        PUSH8   10          ; Push constant 10\n        GT                  ; A > 10?\n        JZ      skip        ; Jump if false\n        PUSH8   1           ; Push 1\n        STORE16 0x1000      ; B := 1\nskip:   ...\n"})}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"8-revision-history",children:"8. Revision History"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Version"}),(0,i.jsx)(d.th,{children:"Date"}),(0,i.jsx)(d.th,{children:"Changes"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"1.0"}),(0,i.jsx)(d.td,{children:"2024"}),(0,i.jsx)(d.td,{children:"Initial specification (62 opcodes)"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"1.1"}),(0,i.jsx)(d.td,{children:"2025"}),(0,i.jsx)(d.td,{children:"Added GET_TICKS opcode (63 total), multitask support"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"1.2"}),(0,i.jsx)(d.td,{children:"2025"}),(0,i.jsx)(d.td,{children:"Added indirect memory opcodes (LOADI*, STOREI*) and STRING opcodes (STRLEN, STRCPY, STRCAT, STRCMP, STRCLR)."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"1.2.1"}),(0,i.jsx)(d.td,{children:"2025"}),(0,i.jsxs)(d.td,{children:["Added PICK opcode (0x41) for deep stack access. Total: ",(0,i.jsx)(d.strong,{children:"75 opcodes"})]})]})]})]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"appendix-a-opcode-quick-reference",children:"Appendix A: Opcode Quick Reference"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{children:"00 NOP       10 DUP       20 ADD       30 AND       \n01 HALT      11 DROP      21 SUB       31 OR        \n02 BREAK     12 SWAP      22 MUL       32 XOR       \n03 GET_TICKS 13 OVER      23 DIV       33 NOT       \n             14 ROT       24 MOD       34 SHL       \n             15 LOADI8    25 NEG       35 SHR       \n             16 LOADI32   26 ABS       36 SAR       \n             17 STOREI8                             \n             18 STOREI32                            \n             19 LOADI16                             \n             1A STOREI16                            \n             1B STRLEN                              \n             1C STRCPY                              \n             1D STRCAT                              \n             1E STRCMP                              \n             1F STRCLR                              \n                                                    \n38 EQ        40 PUSH8     50 JR        80 LOAD8     \n39 NE        41 PICK      51 JRZ       81 LOAD16    90 JMP       \n3A LT        52 JRNZ      82 LOAD32    91 JZ        \n3B LE                     83 LOAD64    92 JNZ       \n3C GT                     84 STORE8    93 CALL      \n3D GE        28 ADDF      85 STORE16   94 RET       \n3E LTU       29 SUBF      86 STORE32               \n3F GTU       2A MULF      87 STORE64               \n             2B DIVF      88 PUSH16                \n             2C NEGF                               \n             2D ABSF      C0 PUSH32                \n                                                    \nA0 I2F       A3 EXT8      A5 ZEXT8                 \nA1 F2I       A4 EXT16     A6 ZEXT16                \nA2 I2B                                              \n"})})]})}function j(e={}){const{wrapper:d}={...(0,r.R)(),...e.components};return d?(0,i.jsx)(d,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}}}]);