"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6442],{7969(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"ide/deployment","title":"Deployment","description":"This guide covers how to deploy your compiled ZPLC program to target hardware.","source":"@site/docs/ide/deployment.md","sourceDirName":"ide","slug":"/ide/deployment","permalink":"/ZPLC/es/docs/ide/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/eduardojvieira/ZPLC/tree/master/docs/docs/ide/deployment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"ideSidebar","previous":{"title":"ST Compiler","permalink":"/ZPLC/es/docs/ide/compiler"},"next":{"title":"Visual Editors","permalink":"/ZPLC/es/docs/ide/editors"}}');var l=i(4848),s=i(8453);const d={},t="Deployment",o={},c=[{value:"Deployment Methods",id:"deployment-methods",level:2},{value:"WebSerial Deployment",id:"webserial-deployment",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Steps",id:"steps",level:3},{value:"Serial Protocol",id:"serial-protocol",level:3},{value:"Baud Rate",id:"baud-rate",level:3},{value:"Network Deployment",id:"network-deployment",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Steps",id:"steps-1",level:3},{value:"Security Considerations",id:"security-considerations",level:3},{value:"File-Based Deployment",id:"file-based-deployment",level:2},{value:"Export Binary",id:"export-binary",level:3},{value:"Load on Device",id:"load-on-device",level:3},{value:"OTA (Over-the-Air) Updates",id:"ota-over-the-air-updates",level:2},{value:"Architecture",id:"architecture",level:3},{value:"Update Process",id:"update-process",level:3},{value:"Rollback",id:"rollback",level:3},{value:"Deployment Verification",id:"deployment-verification",level:2},{value:"Status Check",id:"status-check",level:3},{value:"Variable Watch",id:"variable-watch",level:3},{value:"Diagnostic Commands",id:"diagnostic-commands",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Serial Port Not Found",id:"serial-port-not-found",level:3},{value:"Upload Fails",id:"upload-fails",level:3},{value:"Program Doesn&#39;t Run",id:"program-doesnt-run",level:3},{value:"Network Connection Refused",id:"network-connection-refused",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"deployment",children:"Deployment"})}),"\n",(0,l.jsx)(n.p,{children:"This guide covers how to deploy your compiled ZPLC program to target hardware."}),"\n",(0,l.jsx)(n.h2,{id:"deployment-methods",children:"Deployment Methods"}),"\n",(0,l.jsx)(n.p,{children:"ZPLC supports multiple deployment methods depending on your target platform and connectivity:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Method"}),(0,l.jsx)(n.th,{children:"Connection"}),(0,l.jsx)(n.th,{children:"Use Case"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"WebSerial"}),(0,l.jsx)(n.td,{children:"USB"}),(0,l.jsx)(n.td,{children:"Direct connection from browser"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Network"}),(0,l.jsx)(n.td,{children:"TCP/IP"}),(0,l.jsx)(n.td,{children:"Remote deployment over LAN/WAN"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"File Transfer"}),(0,l.jsx)(n.td,{children:"SD Card/USB"}),(0,l.jsx)(n.td,{children:"Offline deployment"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OTA"}),(0,l.jsx)(n.td,{children:"WiFi/Cellular"}),(0,l.jsx)(n.td,{children:"Field updates"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"webserial-deployment",children:"WebSerial Deployment"}),"\n",(0,l.jsx)(n.p,{children:"The most common method for development. Requires a Chromium-based browser (Chrome, Edge, Brave)."}),"\n",(0,l.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Target hardware connected via USB"}),"\n",(0,l.jsx)(n.li,{children:"Appropriate USB drivers installed (if needed)"}),"\n",(0,l.jsx)(n.li,{children:"ZPLC runtime flashed to the device"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"steps",children:"Steps"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Compile your program"})," (F5 or Build button)"]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Deploy"})," in the IDE toolbar"]}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:"Serial Port"})," when prompted"]}),"\n",(0,l.jsx)(n.li,{children:"Choose the correct COM port"}),"\n",(0,l.jsx)(n.li,{children:"Wait for upload confirmation"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant IDE as ZPLC IDE\n    participant Browser as Browser API\n    participant Device as Target Device\n    \n    IDE->>Browser: Request serial port\n    Browser->>IDE: Port selected\n    IDE->>Device: Send SYNC command\n    Device->>IDE: ACK + version info\n    IDE->>Device: Upload bytecode (chunked)\n    Device->>IDE: ACK per chunk\n    IDE->>Device: Send RUN command\n    Device->>IDE: Program running"}),"\n",(0,l.jsx)(n.h3,{id:"serial-protocol",children:"Serial Protocol"}),"\n",(0,l.jsx)(n.p,{children:"The upload uses a simple ACK-based protocol:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Command"}),(0,l.jsx)(n.th,{children:"Byte"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"SYNC"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"0x55"})}),(0,l.jsx)(n.td,{children:"Synchronization"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"UPLOAD"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"0x01"})}),(0,l.jsx)(n.td,{children:"Start upload"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"CHUNK"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"0x02"})}),(0,l.jsx)(n.td,{children:"Data chunk (256 bytes)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"RUN"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"0x03"})}),(0,l.jsx)(n.td,{children:"Start execution"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"STOP"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"0x04"})}),(0,l.jsx)(n.td,{children:"Stop execution"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACK"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"0x06"})}),(0,l.jsx)(n.td,{children:"Acknowledgment"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"NAK"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"0x15"})}),(0,l.jsx)(n.td,{children:"Error/retry"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"baud-rate",children:"Baud Rate"}),"\n",(0,l.jsxs)(n.p,{children:["Default: ",(0,l.jsx)(n.strong,{children:"115200 bps"})," (configurable in device settings)"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"network-deployment",children:"Network Deployment"}),"\n",(0,l.jsx)(n.p,{children:"For devices with Ethernet or WiFi connectivity."}),"\n",(0,l.jsx)(n.h3,{id:"prerequisites-1",children:"Prerequisites"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Device connected to network"}),"\n",(0,l.jsx)(n.li,{children:"Known IP address or hostname"}),"\n",(0,l.jsx)(n.li,{children:"Port 5000 open (default ZPLC debug port)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"steps-1",children:"Steps"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Compile your program"})}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Deploy"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Network"})]}),"\n",(0,l.jsx)(n.li,{children:"Enter device IP address and port"}),"\n",(0,l.jsx)(n.li,{children:"Authenticate if required"}),"\n",(0,l.jsx)(n.li,{children:"Upload and run"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use TLS for production deployments"}),"\n",(0,l.jsx)(n.li,{children:"Enable authentication on the debug protocol"}),"\n",(0,l.jsx)(n.li,{children:"Restrict access via firewall rules"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"file-based-deployment",children:"File-Based Deployment"}),"\n",(0,l.jsx)(n.p,{children:"For offline or air-gapped systems."}),"\n",(0,l.jsx)(n.h3,{id:"export-binary",children:"Export Binary"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Compile your program"}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Export"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Binary (.zplc)"})]}),"\n",(0,l.jsx)(n.li,{children:"Save to removable media"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"load-on-device",children:"Load on Device"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Option A: SD Card"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Copy ",(0,l.jsx)(n.code,{children:".zplc"})," file to SD card root"]}),"\n",(0,l.jsx)(n.li,{children:"Insert into device"}),"\n",(0,l.jsx)(n.li,{children:"Device auto-loads on boot (if configured)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Option B: USB Mass Storage"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Connect device in bootloader mode"}),"\n",(0,l.jsx)(n.li,{children:"Device appears as USB drive"}),"\n",(0,l.jsxs)(n.li,{children:["Copy ",(0,l.jsx)(n.code,{children:".zplc"})," to the drive"]}),"\n",(0,l.jsx)(n.li,{children:"Eject and reset device"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Option C: Shell Command"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"zplc load /path/to/program.zplc\nzplc run\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"ota-over-the-air-updates",children:"OTA (Over-the-Air) Updates"}),"\n",(0,l.jsx)(n.p,{children:"For deployed field devices with network connectivity."}),"\n",(0,l.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph LR\n    Cloud[Update Server] --\x3e|HTTPS| Gateway[Edge Gateway]\n    Gateway --\x3e|MQTT/CoAP| Device1[Device 1]\n    Gateway --\x3e|MQTT/CoAP| Device2[Device 2]\n    Gateway --\x3e|MQTT/CoAP| DeviceN[Device N]"}),"\n",(0,l.jsx)(n.h3,{id:"update-process",children:"Update Process"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"New binary uploaded to update server"}),"\n",(0,l.jsx)(n.li,{children:"Server notifies devices of available update"}),"\n",(0,l.jsx)(n.li,{children:"Device downloads binary in background"}),"\n",(0,l.jsx)(n.li,{children:"Integrity check (CRC32 + signature verification)"}),"\n",(0,l.jsx)(n.li,{children:"Device schedules restart at safe time"}),"\n",(0,l.jsx)(n.li,{children:"New program loads after reboot"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"rollback",children:"Rollback"}),"\n",(0,l.jsx)(n.p,{children:"If the new program fails to start:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Watchdog triggers after timeout"}),"\n",(0,l.jsx)(n.li,{children:"Bootloader restores previous version"}),"\n",(0,l.jsx)(n.li,{children:"Device reports rollback to server"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"deployment-verification",children:"Deployment Verification"}),"\n",(0,l.jsx)(n.p,{children:"After deploying, verify the program is running correctly:"}),"\n",(0,l.jsx)(n.h3,{id:"status-check",children:"Status Check"}),"\n",(0,l.jsx)(n.p,{children:"In the IDE, the status bar shows:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Connected"}),": Communication established"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Running"}),": Program executing"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cycle Time"}),": Current scan time"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Errors"}),": Any runtime errors"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"variable-watch",children:"Variable Watch"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Open the ",(0,l.jsx)(n.strong,{children:"Watch"})," panel"]}),"\n",(0,l.jsx)(n.li,{children:"Add variables to monitor"}),"\n",(0,l.jsx)(n.li,{children:"Verify values update in real-time"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"diagnostic-commands",children:"Diagnostic Commands"}),"\n",(0,l.jsx)(n.p,{children:"Via serial shell:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"zplc status      # Show runtime status\nzplc stats       # Show cycle timing statistics\nzplc vars        # List all variables\nzplc watch VAR   # Continuously print variable value\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"serial-port-not-found",children:"Serial Port Not Found"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Check USB cable connection"}),"\n",(0,l.jsx)(n.li,{children:"Verify drivers are installed"}),"\n",(0,l.jsx)(n.li,{children:"Try a different USB port"}),"\n",(0,l.jsx)(n.li,{children:"Check if another application is using the port"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"upload-fails",children:"Upload Fails"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Reduce baud rate to 9600 and retry"}),"\n",(0,l.jsx)(n.li,{children:"Check for firmware version compatibility"}),"\n",(0,l.jsx)(n.li,{children:"Ensure sufficient flash space on device"}),"\n",(0,l.jsx)(n.li,{children:"Verify CRC matches after upload"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"program-doesnt-run",children:"Program Doesn't Run"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Check for runtime errors in console"}),"\n",(0,l.jsx)(n.li,{children:"Verify I/O configuration matches hardware"}),"\n",(0,l.jsx)(n.li,{children:"Ensure all required function blocks are available"}),"\n",(0,l.jsx)(n.li,{children:"Check memory usage doesn't exceed limits"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"network-connection-refused",children:"Network Connection Refused"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Verify IP address is correct"}),"\n",(0,l.jsx)(n.li,{children:"Check firewall settings"}),"\n",(0,l.jsx)(n.li,{children:"Ensure device is not in fault state"}),"\n",(0,l.jsx)(n.li,{children:"Verify authentication credentials"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);